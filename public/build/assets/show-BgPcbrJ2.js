import{b as U,r as o,j as e,L as W,$ as m,a as G}from"./app-BDPF6XWD.js";import{H as q,T as z,F as J}from"./header-CuvVJ7Zw.js";import{S as K}from"./share-dialog-C3dsrAYQ.js";import{A as f,a as y,b as N}from"./user-menu-content-37-s7jzu.js";import{B as _}from"./badge-Bk8zNMfQ.js";import{B as $}from"./button-BWQ39lpX.js";import{C as i,a,b as l,c}from"./card-CSbp53QZ.js";import{t as x}from"./index-Zo8ydi5n.js";import{C as k}from"./calendar-DVAeMxRZ.js";import{T as b}from"./thumbs-up-Cz6Rvwzr.js";import{E as T}from"./external-link-CEIWX7oE.js";import{T as Q}from"./triangle-alert-DCX4dw8W.js";import{T as X}from"./thumbs-down-D6RugFPm.js";import"./app-Cd4ck7dt.js";import"./index-6vk5fxdd.js";import"./dialog-CSjcEqSw.js";import"./search-BiNdrSLG.js";import"./popover-BkveXq0M.js";import"./index-CrTdXheg.js";import"./index-BYGa_Suc.js";import"./bell-BSh_tEMX.js";import"./chevron-down-BxXeQA9B.js";import"./bookmark-DY6l-1FX.js";import"./clock-D2XQ4mI7.js";import"./input-BoGsrbZa.js";import"./share-2-CKIupp6M.js";import"./copy-DpVCY7Zq.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],C=U("Info",Z);function Le({auth:h,listing:V,relatedListings:v,meta:n}){const s=V||{},[A,H]=o.useState(s.yes_votes||0),[M,B]=o.useState(s.no_votes||0),[g,P]=o.useState(()=>{const t=(s.yes_votes||0)+(s.no_votes||0);return t>0?Math.round(s.yes_votes/t*100):0}),[w,F]=o.useState(()=>{const t=(s.yes_votes||0)+(s.no_votes||0);return t>0?Math.round(s.no_votes/t*100):0}),[r,E]=o.useState(null),[p,D]=o.useState(!1);o.useEffect(()=>{const t=localStorage.getItem(`vote_${s.id}`);(t==="yes"||t==="no")&&E(t)},[s.id]);const L=async t=>{var u;if(!h.user){x.error("You need to be logged in to vote");return}if(!(r||p)){D(!0);try{const d=await G.post(`/crypto-exchange-listings/${s.id}/vote`,{vote_type:t}),{yes_votes:S,no_votes:Y,yes_percentage:R,no_percentage:O}=d.data;H(S),B(Y),P(R),F(O),E(t),localStorage.setItem(`vote_${s.id}`,t),x.success("Vote recorded successfully!")}catch(d){console.error("Error voting",d),((u=d.response)==null?void 0:u.status)===401?x.error("You need to be logged in to vote"):x.error("Failed to vote. Please try again later.")}finally{D(!1)}}},j=t=>new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});return e.jsxs("div",{children:[e.jsxs(W,{title:n.title,children:[e.jsx("meta",{name:"description",content:n.description??""}),e.jsx("meta",{name:"keywords",content:n.keywords}),e.jsx("meta",{property:"og:title",content:n.og.title}),e.jsx("meta",{property:"og:description",content:n.og.description??""}),n.og.image&&e.jsx("meta",{property:"og:image",content:n.og.image}),e.jsx("meta",{property:"og:type",content:n.og.type}),e.jsx("meta",{property:"og:url",content:n.og.url}),e.jsx("meta",{name:"twitter:card",content:n.twitter.card}),e.jsx("meta",{name:"twitter:title",content:n.twitter.title}),e.jsx("meta",{name:"twitter:description",content:n.twitter.description??""}),n.twitter.image&&e.jsx("meta",{name:"twitter:image",content:n.twitter.image})]}),e.jsx(q,{}),e.jsxs("main",{className:"mx-auto max-w-7xl px-4 py-8 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{href:"/crypto-exchange-listings",className:"text-muted-foreground hover:text-foreground",children:"Crypto Exchange Listings"}),e.jsx("span",{className:"text-muted-foreground",children:"/"}),e.jsx("span",{className:"font-medium",children:s.coin_name})]}),e.jsx(K,{url:window.location.href,title:`${s.coin_name} (${s.coin_symbol}) ${s.listing_type} on ${s.exchange_name}`,description:s.description?s.description.slice(0,200):""})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx(i,{className:"mb-6",children:e.jsx(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsxs("div",{className:"flex flex-col items-start gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(f,{className:"mr-2 h-16 w-16",children:[e.jsx(y,{src:s.coin_logo||void 0,alt:s.coin_name}),e.jsx(N,{className:"bg-primary/10 text-primary font-bold",children:s.coin_symbol.slice(0,2)})]}),e.jsx("span",{className:"mx-2 text-2xl",children:"on"}),e.jsxs(f,{className:"ml-2 h-12 w-12",children:[e.jsx(y,{src:s.exchange_logo||void 0,alt:s.exchange_name}),e.jsx(N,{className:"bg-secondary/80 text-secondary-foreground font-bold",children:s.exchange_name.slice(0,2)})]})]}),e.jsxs("div",{children:[e.jsxs(l,{className:"text-2xl md:text-3xl",children:[s.coin_name," (",s.coin_symbol,")"," ",s.listing_type==="listing"?"Listed on":"Delisted from"," ",s.exchange_name]}),e.jsxs("div",{className:"text-muted-foreground mt-2 flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),j(s.listing_date)]}),e.jsx(I,{type:s.listing_type}),s.is_featured&&e.jsx(_,{className:"border border-red-200 bg-red-100 font-semibold text-red-800",children:"Featured"})]})]})]})})}),e.jsx(i,{className:"bg-muted/30 mb-6",children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"bg-background flex flex-col items-center justify-center rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"bg-primary/10 mb-2 flex h-10 w-10 items-center justify-center rounded-full",children:e.jsx(k,{className:"text-primary h-5 w-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium",children:s.listing_type==="listing"?"Listing Date":"Delisting Date"}),e.jsx("p",{className:"font-bold",children:j(s.listing_date)})]})]}),e.jsxs("div",{className:"bg-background flex flex-col items-center justify-center rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-primary/10",children:e.jsx(z,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium",children:"Also Listed On"}),e.jsxs("p",{className:"font-bold",children:[s.already_listing_count," ",s.already_listing_count===1?"Exchange":"Exchanges"]})]})]}),e.jsxs("div",{className:"bg-background flex flex-col items-center justify-center rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-green-50",children:e.jsx(b,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium",children:"Community Rating"}),e.jsxs("p",{className:"font-bold",children:[g,"% Positive"]})]})]})]})})}),e.jsxs(i,{className:"mb-6",children:[e.jsx(a,{children:e.jsxs(l,{children:["Exchange ",s.listing_type==="listing"?"Listing":"Delisting"," Details"]})}),e.jsx(c,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 p-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex justify-between border-b p-3",children:[e.jsx("span",{className:"font-medium",children:"Exchange"}),e.jsx("span",{children:s.exchange_name})]}),e.jsxs("div",{className:"flex justify-between border-b p-3",children:[e.jsx("span",{className:"font-medium",children:"Listing Date"}),e.jsx("span",{children:j(s.listing_date)})]}),s.trading_pairs&&e.jsxs("div",{className:"flex justify-between border-b p-3",children:[e.jsx("span",{className:"font-medium",children:"Trading Pairs"}),e.jsx("span",{children:s.trading_pairs})]}),e.jsxs("div",{className:"flex justify-between border-b p-3",children:[e.jsx("span",{className:"font-medium",children:"Listed on Other Exchanges"}),e.jsxs("span",{children:[s.already_listing_count," ",s.already_listing_count===1?"Exchange":"Exchanges"]})]}),s.website_url&&e.jsxs("div",{className:"flex justify-between border-b p-3",children:[e.jsx("span",{className:"font-medium",children:"Website"}),e.jsxs(m,{href:s.website_url,className:"text-primary flex items-center hover:underline",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(T,{className:"mr-1 h-4 w-4"}),"Visit"]})]}),s.explorer_url&&e.jsxs("div",{className:"flex justify-between border-b p-3",children:[e.jsx("span",{className:"font-medium",children:"Explorer"}),e.jsxs(m,{href:s.explorer_url,className:"text-primary flex items-center hover:underline",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(T,{className:"mr-1 h-4 w-4"}),"Explore"]})]})]})})})]}),s.description&&e.jsxs(i,{className:"mb-6",children:[e.jsxs(a,{className:"flex flex-row items-center gap-2",children:[e.jsx(C,{className:"text-primary h-5 w-5"}),e.jsxs(l,{children:["About This ",s.listing_type==="listing"?"Listing":"Delisting"]})]}),e.jsx(c,{children:e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s.description}})})]}),s.about_project&&e.jsxs(i,{className:"mb-6",children:[e.jsxs(a,{className:"flex flex-row items-center gap-2",children:[e.jsx(C,{className:"text-primary h-5 w-5"}),e.jsxs(l,{children:["About ",s.coin_name," (",s.coin_symbol,")"]})]}),e.jsx(c,{children:e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s.about_project}})})]}),s.what_happens&&e.jsxs(i,{className:"mb-6",children:[e.jsxs(a,{className:"flex flex-row items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-yellow-500"}),e.jsxs(l,{children:["What Happens After ",s.listing_type==="listing"?"Listing":"Delisting"]})]}),e.jsx(c,{children:e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s.what_happens}})})]}),s.final_thoughts&&e.jsxs(i,{className:"mb-6",children:[e.jsxs(a,{className:"flex flex-row items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-green-500"}),e.jsx(l,{children:"Final Thoughts"})]}),e.jsx(c,{children:e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s.final_thoughts}})})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"sticky top-4 space-y-6",children:[e.jsxs(i,{children:[e.jsx(a,{children:e.jsx(l,{children:"Community Recommendation"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-center text-lg font-medium",children:["Is ",s.coin_name," worth ",s.listing_type==="listing"?"buying":"selling","?"]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs($,{onClick:()=>L("yes"),disabled:r!==null||p,variant:r==="yes"?"secondary":"outline",className:`flex-1 ${r==="yes"?"bg-green-100 text-green-700":""}`,children:[e.jsx(b,{className:`mr-2 h-5 w-5 ${r==="yes"?"fill-green-600":""}`}),"Yes (",g,"%)"]}),e.jsxs($,{onClick:()=>L("no"),disabled:r!==null||p,variant:r==="no"?"secondary":"outline",className:`flex-1 ${r==="no"?"bg-red-100 text-red-700":""}`,children:[e.jsx(X,{className:`mr-2 h-5 w-5 ${r==="no"?"fill-red-600":""}`}),"No (",w,"%)"]})]}),e.jsxs("div",{className:"bg-muted/30 relative h-4 overflow-hidden rounded-full",children:[e.jsx("div",{className:"absolute top-0 left-0 h-full rounded-l-full bg-green-500",style:{width:`${g}%`}}),e.jsx("div",{className:"absolute top-0 right-0 h-full rounded-r-full bg-red-500",style:{width:`${w}%`}})]}),e.jsxs("div",{className:"text-muted-foreground text-center text-xs",children:["Based on ",A+M," votes"]})]})})]}),v.length>0&&e.jsxs(i,{children:[e.jsx(a,{children:e.jsx(l,{children:"Related Listings"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:v.map(t=>e.jsxs(m,{href:`/crypto-exchange-listings/${t.slug}`,className:"hover:bg-muted flex items-center gap-3 rounded-lg p-2 transition-colors",children:[e.jsxs(f,{className:"h-10 w-10",children:[e.jsx(y,{src:t.coin_logo||void 0,alt:t.coin_name}),e.jsx(N,{children:t.coin_symbol.slice(0,2)})]}),e.jsxs("div",{className:"flex-1 truncate",children:[e.jsx("div",{className:"font-medium",children:t.coin_name}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[t.listing_type==="listing"?"Listed on":"Delisted from"," ",t.exchange_name]})]}),e.jsx(I,{type:t.listing_type})]},t.id))})})]})]})})]})]}),e.jsx(J,{})]})}function I({type:h}){return h==="listing"?e.jsx(_,{className:"rounded-full bg-green-500 px-3 py-0.5 text-white hover:bg-green-600",children:"Listing"}):e.jsx(_,{className:"rounded-full bg-red-500 px-3 py-0.5 text-white hover:bg-red-600",children:"Delisting"})}export{Le as default};
