import{r as p,j as e,c as B,S as N,Q as pe,a as ve}from"./app-D8icrVYM.js";import{H as fe,F as be}from"./header-JcTeEqhp.js";import{S as je}from"./share-dialog-D207uf3l.js";import{u as ye,k as Ne,x as ae,y as _e,I as Se,X as we,A as U,a as X,b as Y}from"./user-menu-content-CLxThg4j.js";import{B as k}from"./badge-CXOaY9cA.js";import{B as C}from"./button-DzrsmVT0.js";import{D as Ce}from"./data-table-_KlK-rhV.js";import{I as J}from"./input-X6EncxVb.js";import{S as W,a as Z,b as ee,c as se,d as E}from"./select-lMcvCwdC.js";import{u as Te,c as Ee,a as D,P as ke}from"./index-D0yU9g8m.js";import{P as F}from"./index-CaF_lAAN.js";import{t as M}from"./index-BWB-lyaQ.js";import{u as Fe}from"./useDebounce-BfeUJXNs.js";import{F as Ae}from"./filter-DYXOZybk.js";import{S as te}from"./search-C4DOzTCB.js";import{C as Ve}from"./chevron-left-CGZErvSI.js";import{C as Le}from"./chevron-right-DoVPII0p.js";import{T as Pe}from"./thumbs-up-DJgtDpwA.js";import{T as $e}from"./thumbs-down-uOcAZv3f.js";import{S as Ie}from"./share-2-WQiB8hsD.js";import"./app-C6p-88sg.js";import"./dialog-C0YkQmmj.js";import"./popover-Bq671bbt.js";import"./bell-BnKBy4-a.js";import"./calendar-BTEYOzcx.js";import"./chevron-down-BfxtOCo0.js";import"./bookmark-D-W3TxsT.js";import"./clock-BHN-_nY0.js";import"./copy-TzeSMFOo.js";import"./table-a4hPbtKC.js";import"./index-BdQq_4o_.js";import"./index-CP95mmJc.js";import"./check-RqoS6xJl.js";import"./chevron-up-Pe5DplPi.js";var A="Tabs",[De,Cs]=Ee(A,[ae]),ne=ae(),[Me,z]=De(A),re=p.forwardRef((n,o)=>{const{__scopeTabs:r,value:a,onValueChange:x,defaultValue:i,orientation:l="horizontal",dir:d,activationMode:b="automatic",...j}=n,u=ye(d),[g,f]=Te({prop:a,onChange:x,defaultProp:i??"",caller:A});return e.jsx(Me,{scope:r,baseId:Ne(),value:g,onValueChange:f,orientation:l,dir:u,activationMode:b,children:e.jsx(F.div,{dir:u,"data-orientation":l,...j,ref:o})})});re.displayName=A;var ie="TabsList",oe=p.forwardRef((n,o)=>{const{__scopeTabs:r,loop:a=!0,...x}=n,i=z(ie,r),l=ne(r);return e.jsx(_e,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:e.jsx(F.div,{role:"tablist","aria-orientation":i.orientation,...x,ref:o})})});oe.displayName=ie;var le="TabsTrigger",ce=p.forwardRef((n,o)=>{const{__scopeTabs:r,value:a,disabled:x=!1,...i}=n,l=z(le,r),d=ne(r),b=ge(l.baseId,a),j=me(l.baseId,a),u=a===l.value;return e.jsx(Se,{asChild:!0,...d,focusable:!x,active:u,children:e.jsx(F.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":j,"data-state":u?"active":"inactive","data-disabled":x?"":void 0,disabled:x,id:b,...i,ref:o,onMouseDown:D(n.onMouseDown,g=>{!x&&g.button===0&&g.ctrlKey===!1?l.onValueChange(a):g.preventDefault()}),onKeyDown:D(n.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&l.onValueChange(a)}),onFocus:D(n.onFocus,()=>{const g=l.activationMode!=="manual";!u&&!x&&g&&l.onValueChange(a)})})})});ce.displayName=le;var de="TabsContent",Re=p.forwardRef((n,o)=>{const{__scopeTabs:r,value:a,forceMount:x,children:i,...l}=n,d=z(de,r),b=ge(d.baseId,a),j=me(d.baseId,a),u=a===d.value,g=p.useRef(u);return p.useEffect(()=>{const f=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(ke,{present:x||u,children:({present:f})=>e.jsx(F.div,{"data-state":u?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":b,hidden:!f,id:j,tabIndex:0,...l,ref:o,style:{...n.style,animationDuration:g.current?"0s":void 0},children:f&&i})})});Re.displayName=de;function ge(n,o){return`${n}-trigger-${o}`}function me(n,o){return`${n}-content-${o}`}var Ke=re,Be=oe,ze=ce;function Ge({className:n,...o}){return e.jsx(Ke,{"data-slot":"tabs",className:B("flex flex-col gap-2",n),...o})}function He({className:n,...o}){return e.jsx(Be,{"data-slot":"tabs-list",className:B("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",n),...o})}function R({className:n,...o}){return e.jsx(ze,{"data-slot":"tabs-trigger",className:B("data-[state=active]:bg-background focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...o})}function Ts({listings:n,exchanges:o,filters:r}){const[a,x]=p.useState(r&&r.exchange_type?r.exchange_type:"all"),[i,l]=p.useState(r&&r.exchange?r.exchange:"all"),[d,b]=p.useState(r&&r.search?r.search:""),[j,u]=p.useState(()=>{const s={};return typeof window<"u"&&n.data.forEach(t=>{const m=localStorage.getItem(`vote_${t.id}`);(m==="yes"||m==="no")&&(s[t.id]=m)}),s}),[g,f]=p.useState({}),[G,xe]=p.useState(!1),V=Fe(d,500),c=n||{data:[],current_page:1,per_page:10,total:0,last_page:1,links:[]},H=o||[];p.useEffect(()=>{const s=r&&r.search?r.search:"";V!==s&&N.get("/crypto-exchange-listings",{exchange_type:a==="all"?void 0:a,exchange:i==="all"?void 0:i,search:V||void 0},{preserveState:!0,replace:!0})},[V,a,i,r]);const ue=s=>{N.visit(`/crypto-exchange-listings/${s.slug}`)},Q=async(s,t,m)=>{var y;if(s.stopPropagation(),!(j[t]||g[t])){f(v=>({...v,[t]:!0}));try{const v=await ve.post(`/crypto-exchange-listings/${t}/vote`,{vote_type:m}),{yes_votes:S,no_votes:_,yes_percentage:P,no_percentage:$}=v.data;u(I=>({...I,[t]:m})),localStorage.setItem(`vote_${t}`,m);const h={...c},w=h.data.findIndex(I=>I.id===t);w!==-1&&(h.data[w].yes_votes=S,h.data[w].no_votes=_,h.data[w].yes_percentage=P,h.data[w].no_percentage=$),M.success("Vote recorded successfully!")}catch(v){console.error("Error voting for listing",v),((y=v.response)==null?void 0:y.status)===401?M.error("You need to be logged in to vote"):M.error("Failed to vote. Please try again later.")}finally{f(v=>({...v,[t]:!1}))}}},T=s=>{x(s),N.get("/crypto-exchange-listings",{exchange_type:s==="all"?void 0:s,exchange:i==="all"?void 0:i},{preserveState:!0})},O=s=>{l(s),N.get("/crypto-exchange-listings",{exchange_type:a==="all"?void 0:a,exchange:s==="all"?void 0:s},{preserveState:!0})},q=s=>{s.key==="Enter"&&N.get("/crypto-exchange-listings",{exchange_type:a==="all"?void 0:a,exchange:i==="all"?void 0:i,search:d},{preserveState:!0})},he=[{accessorKey:"formatted_listing_date",header:"Date / Time",cell:({row:s})=>e.jsx("div",{className:"text-left font-medium",dangerouslySetInnerHTML:{__html:s.original.formatted_listing_date}}),enableSorting:!0},{accessorKey:"coin_name",header:"Coin",cell:({row:s})=>{const t=s.original;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(U,{className:"h-10 w-10 rounded-full border",children:[e.jsx(X,{src:t.coin_logo??void 0,alt:t.coin_name}),e.jsx(Y,{className:"bg-primary/10 text-primary font-bold",children:t.coin_symbol.slice(0,2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.coin_name}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:["(",t.coin_symbol,")"]})]}),t.is_featured&&e.jsx(k,{className:"ml-1 border border-red-200 bg-red-100 font-semibold text-red-800",children:"Featured"})]})},enableSorting:!0},{accessorKey:"exchange_name",header:"Exchange",cell:({row:s})=>{const t=s.original;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(U,{className:"h-8 w-8 rounded-full border",children:[e.jsx(X,{src:t.exchange_logo??void 0,alt:t.exchange_name}),e.jsx(Y,{className:"bg-secondary/80 text-secondary-foreground font-bold",children:t.exchange_name.slice(0,2)})]}),e.jsx("div",{className:"font-medium",children:t.exchange_name})]})},enableSorting:!0},{accessorKey:"listing_type",header:"Type",cell:({row:s})=>e.jsx("div",{className:"flex justify-start",children:e.jsx(Qe,{type:s.original.listing_type})}),enableSorting:!0},{accessorKey:"trading_pairs",header:"Trading Pairs",cell:({row:s})=>{const t=s.original;return e.jsx("div",{className:"text-left font-medium",children:t.trading_pairs||"TBA"})}},{accessorKey:"already_listing_count",header:"Already Listing",cell:({row:s})=>{const t=s.original;return e.jsx("div",{className:"text-left font-medium",children:t.already_listing_count>0?e.jsxs(k,{variant:"outline",className:"bg-primary/10 font-medium text-primary border-primary/20",children:[t.already_listing_count," Exchanges"]}):"None"})},enableSorting:!0},{accessorKey:"actions",header:"Actions",cell:({row:s})=>{const t=s.original,m=j[t.id],y=g[t.id],v=t.yes_votes||0,S=t.no_votes||0,_=v+S,P=_>0?Math.round(v/_*100):0,$=_>0?Math.round(S/_*100):0;return e.jsxs("div",{className:"flex items-center gap-2",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center overflow-hidden rounded-lg border",children:[e.jsxs("button",{className:`flex items-center px-2 py-1 text-sm font-medium transition-colors ${m==="yes"?"bg-green-100 text-green-700":y?"bg-gray-100 text-gray-500":"bg-green-50 text-green-600 hover:bg-green-100"}`,onClick:h=>Q(h,t.id,"yes"),disabled:!!m||y,children:[e.jsx(Pe,{className:`mr-1 h-3 w-3 ${m==="yes"?"fill-green-600":""}`}),P,"%"]}),e.jsxs("button",{className:`flex items-center px-2 py-1 text-sm font-medium transition-colors ${m==="no"?"bg-red-100 text-red-700":y?"bg-gray-100 text-gray-500":"bg-red-50 text-red-600 hover:bg-red-100"}`,onClick:h=>Q(h,t.id,"no"),disabled:!!m||y,children:[e.jsx($e,{className:`mr-1 h-3 w-3 ${m==="no"?"fill-red-600":""}`}),$,"%"]})]}),e.jsx(je,{url:`${window.location.origin}/crypto-exchange-listings/${t.slug}`,title:`${t.coin_name} (${t.coin_symbol}) ${t.listing_type} on ${t.exchange_name}`,description:t.description?t.description.slice(0,200):"",trigger:e.jsx("button",{className:"rounded-full bg-gray-100 p-1.5 transition-colors hover:bg-gray-200",onClick:h=>h.stopPropagation(),title:"Share",children:e.jsx(Ie,{className:"h-4 w-4"})})})]})}}],L=()=>{xe(!G)};return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{children:[e.jsx("title",{children:"Crypto Exchange Listings | CoinMews"}),e.jsx("meta",{name:"description",content:"Stay updated with the latest cryptocurrency exchange listings and delistings. Find information about upcoming token listings on major exchanges."})]}),e.jsx(fe,{}),e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"px-4 pb-8 lg:px-8",children:[e.jsxs("div",{className:"my-8",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight sm:text-3xl",children:"Crypto Exchange Listings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track upcoming cryptocurrency listings and delistings on major exchanges. Stay ahead of market movements."})]}),e.jsxs("div",{className:"mb-4 flex items-center justify-between lg:hidden",children:[e.jsxs(C,{variant:"outline",onClick:L,className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Filters"]}),e.jsxs("div",{className:"relative ml-2 max-w-sm flex-1",children:[e.jsx(te,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2"}),e.jsx(J,{placeholder:"Search...",className:"pl-9",value:d,onChange:s=>b(s.target.value),onKeyDown:q})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"",children:e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2"}),e.jsx(J,{placeholder:"Search By Coin Name or Symbol...",className:"pl-9",value:d,onChange:s=>b(s.target.value),onKeyDown:q})]})}),e.jsx("div",{className:"w-max",children:e.jsxs(W,{value:i,onValueChange:O,children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select Exchange"})}),e.jsxs(se,{children:[e.jsx(E,{value:"all",children:"All Exchanges"}),H.map(s=>e.jsx(E,{value:s,children:s},s))]})]})}),e.jsx("div",{children:e.jsx(Ge,{defaultValue:a,onValueChange:T,className:"w-full",children:e.jsxs(He,{className:"grid w-full grid-cols-3",children:[e.jsx(R,{value:"all",children:"All"}),e.jsx(R,{value:"listing",children:"Listings"}),e.jsx(R,{value:"delisting",children:"Delistings"})]})})})]})})})}),G&&e.jsx("div",{className:"bg-background/80 fixed inset-0 z-50 backdrop-blur-sm lg:hidden",children:e.jsxs("div",{className:"bg-background fixed inset-y-0 left-0 w-full max-w-xs p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),e.jsx(C,{variant:"ghost",size:"icon",onClick:L,children:e.jsx(we,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-sm font-medium",children:"Listing Type"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{active:a==="all",onClick:()=>T("all"),children:"All Listings"}),e.jsx(K,{active:a==="listing",onClick:()=>T("listing"),children:"Exchange Listings"}),e.jsx(K,{active:a==="delisting",onClick:()=>T("delisting"),children:"Exchange Delistings"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-sm font-medium",children:"Exchange"}),e.jsxs(W,{value:i,onValueChange:O,children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select Exchange"})}),e.jsxs(se,{children:[e.jsx(E,{value:"all",children:"All Exchanges"}),H.map(s=>e.jsx(E,{value:s,children:s},s))]})]})]}),e.jsx(C,{onClick:L,className:"w-full",children:"Apply Filters"})]})]})}),e.jsxs("div",{className:"bg-card rounded-lg shadow-sm",children:[e.jsx(Ce,{columns:he,data:c.data,pageCount:Math.ceil(c.total/c.per_page),currentPage:c.current_page,onRowClick:ue}),c.total>c.per_page&&e.jsxs("div",{className:"bg-muted/20 flex items-center justify-between border-t px-4 py-3",children:[e.jsxs("div",{className:"text-muted-foreground text-sm",children:["Showing ",e.jsx("span",{className:"font-medium",children:c.data.length})," of"," ",e.jsx("span",{className:"font-medium",children:c.total})," listings"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(C,{variant:"outline",size:"sm",className:"h-8 px-3",disabled:c.current_page===1,onClick:()=>N.get("/crypto-exchange-listings",{page:c.current_page-1,exchange_type:a!=="all"?a:void 0,exchange:i!=="all"?i:void 0,search:d||void 0},{preserveState:!0}),children:[e.jsx(Ve,{className:"mr-1 h-4 w-4"})," Previous"]}),e.jsxs("span",{className:"px-3 text-sm",children:["Page ",c.current_page]}),e.jsxs(C,{variant:"outline",size:"sm",className:"h-8 px-3",disabled:c.current_page*c.per_page>=c.total,onClick:()=>N.get("/crypto-exchange-listings",{page:c.current_page+1,exchange_type:a!=="all"?a:void 0,exchange:i!=="all"?i:void 0,search:d||void 0},{preserveState:!0}),children:["Next ",e.jsx(Le,{className:"ml-1 h-4 w-4"})]})]})]})]})]})}),e.jsx(be,{})]})}function Qe({type:n}){return n==="listing"?e.jsx(k,{className:"rounded-full bg-green-500 px-3 py-0.5 text-white hover:bg-green-600",children:"Listing"}):e.jsx(k,{className:"rounded-full bg-red-500 px-3 py-0.5 text-white hover:bg-red-600",children:"Delisting"})}function K({active:n,onClick:o,children:r}){return e.jsx("button",{onClick:o,className:`w-full rounded-md px-3 py-2 text-left transition-colors ${n?"bg-primary text-primary-foreground font-medium":"hover:bg-muted text-foreground"}`,children:r})}export{Ts as default};
