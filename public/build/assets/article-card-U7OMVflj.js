import{b as S,r as x,j as e,c as b,t as P}from"./app-D8icrVYM.js";import{B as h}from"./badge-CXOaY9cA.js";import{C as z,c as I,b as A,d as $}from"./card-C0Dp6CIR.js";import{X as B}from"./user-menu-content-CLxThg4j.js";import{L as M}from"./loader-circle-BToWpoPf.js";import{C as U}from"./chevron-left-CGZErvSI.js";import{C as X}from"./chevron-right-DoVPII0p.js";import{T as J,U as R}from"./header-JcTeEqhp.js";import{I as F}from"./image-GdyKhs8g.js";import{E as G}from"./eye-hueCPB8Y.js";import{M as O,B as K}from"./message-square-maO4SEEE.js";import{C as T}from"./calendar-BTEYOzcx.js";import{G as W}from"./search-C4DOzTCB.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],H=S("Pause",q);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],E=S("Play",Q),V=({article:s,onClose:o})=>{var _,k;const[t,i]=x.useState(0),[g,u]=x.useState(!0),[c,a]=x.useState(0),[l,f]=x.useState(!1),d=((r,n)=>{if(Array.isArray(r))return r;if(!r)return n;try{const m=JSON.parse(r);return Array.isArray(m)?m:n}catch{return n}})(s.story_slides,[]),v=(s.story_duration?s.story_duration*1e3:5e3)/(s.slides_count||d.length);x.useEffect(()=>{a(0),u(!0);let r,n;if(!l){const m=Date.now();r=setInterval(()=>{const p=(Date.now()-m)/v*100;p>=100?a(100):a(p)},16),n=setTimeout(()=>{t<d.length-1?i(t+1):o()},v)}return()=>{clearInterval(r),clearTimeout(n)}},[t,l,d.length,o,v]);const j=()=>{t<d.length-1?i(t+1):o()},N=()=>{t>0&&i(t-1)},D=r=>{f(!0);const m=r.touches[0].clientX,y=L=>{const w=L.touches[0].clientX-m;Math.abs(w)>50&&(w>0&&t>0?N():w<0&&t<d.length-1&&j(),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",p))},p=()=>{f(!1),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",p)};document.addEventListener("touchmove",y),document.addEventListener("touchend",p)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 z-50 rounded-full bg-black/20 p-2 text-white backdrop-blur-sm transition-all hover:bg-black/40",children:e.jsx(B,{className:"h-6 w-6"})}),e.jsx("div",{className:"absolute top-0 right-0 left-0 z-40 flex gap-1 p-2",children:d.map((r,n)=>e.jsx("div",{className:"h-0.5 flex-1 overflow-hidden rounded-full bg-white/30",children:e.jsx("div",{className:"h-full bg-white transition-all duration-100",style:{width:`${n===t?c:n<t?100:0}%`}})},n))}),e.jsxs("div",{className:"relative h-full w-full",onTouchStart:D,onClick:r=>{const n=r.currentTarget.getBoundingClientRect();r.clientX-n.left>n.width/2?j():N()},children:[e.jsxs("div",{className:"relative h-full w-full",children:[g&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black",children:e.jsx(M,{className:"h-8 w-8 animate-spin text-white"})}),e.jsx("img",{src:(_=d[t])==null?void 0:_.image,alt:`Story slide ${t+1}`,className:"h-full w-full object-cover",onLoad:()=>u(!1)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/60"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-6",children:e.jsx("div",{className:"prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:((k=d[t])==null?void 0:k.content)||""}})})]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),N()},className:"absolute top-1/2 left-2 z-10 -translate-y-1/2 rounded-full bg-black/20 p-1 text-white backdrop-blur-sm transition-all hover:bg-black/40 disabled:opacity-50",disabled:t===0,children:e.jsx(U,{className:"h-6 w-6"})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),j()},className:"absolute top-1/2 right-2 z-10 -translate-y-1/2 rounded-full bg-black/20 p-1 text-white backdrop-blur-sm transition-all hover:bg-black/40 disabled:opacity-50",disabled:t===d.length-1,children:e.jsx(X,{className:"h-6 w-6"})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),f(!l)},className:"absolute right-4 bottom-4 z-10 rounded-full bg-black/20 p-2 text-white backdrop-blur-sm transition-all hover:bg-black/40",children:l?e.jsx(E,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"})})]})]})},Y=({article:s})=>{var c;const[o,t]=x.useState(!1);if(s.content_type!=="web_story")return null;const i=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"",g=()=>{if(!s.story_slides)return 0;try{const a=typeof s.story_slides=="string"?JSON.parse(s.story_slides):s.story_slides;return Array.isArray(a)?a.length:0}catch{return 0}},u=s.slides_count||g();return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t(!0),className:"focus-visible:ring-primary block w-full text-left focus:outline-none focus-visible:ring-1",children:e.jsxs("div",{className:b("group bg-muted relative w-full overflow-hidden rounded-lg","hover:ring-border transition-all duration-200 hover:shadow-md hover:ring-1","aspect-[3/4] sm:aspect-[3/5] md:aspect-[9/16]",s.deleted_at&&"opacity-60",!s.is_vertical&&"aspect-video"),children:[e.jsx("img",{src:s.banner_url||"/default-banner.png",alt:s.title,className:"absolute inset-0 h-full w-full object-contain",onError:a=>{a.currentTarget.src="/default-banner.png"},loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/80"}),s.is_breaking_news&&e.jsx("div",{className:"bg-destructive text-destructive-foreground absolute top-0 left-0 px-2 py-0.5 text-[10px] font-bold",children:"BREAKING"}),e.jsx("div",{className:"absolute top-1.5 right-1.5 left-1.5 flex items-center justify-between",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.is_trending&&e.jsxs("span",{className:"bg-accent/90 text-accent-foreground flex items-center rounded-full px-1.5 py-0.5 text-[10px] font-medium",children:[e.jsx(J,{className:"mr-0.5 h-2 w-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Trending"})]})})}),e.jsx("div",{className:"absolute right-0 bottom-0 left-0 p-2",children:e.jsx("div",{className:"space-y-0.5",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1",children:[u>0&&e.jsxs("div",{className:"flex items-center gap-0.5 text-[10px] text-white/90",children:[e.jsx(F,{className:"h-2.5 w-2.5"}),e.jsx("span",{children:u})]}),s.view_count>0&&e.jsxs("div",{className:"flex items-center gap-0.5 text-[10px] text-white/90",children:[e.jsx(G,{className:"h-2.5 w-2.5"}),e.jsx("span",{children:s.view_count>1e3?`${(s.view_count/1e3).toFixed(1)}K`:s.view_count})]}),((c=s.comments)==null?void 0:c.length)>0&&e.jsxs("div",{className:"flex items-center gap-0.5 text-[10px] text-white/90",children:[e.jsx(O,{className:"h-2.5 w-2.5"}),e.jsx("span",{children:s.comments.length})]}),e.jsxs("div",{className:"flex items-center gap-0.5 text-[10px] text-white/90",children:[e.jsx(T,{className:"h-2.5 w-2.5"}),e.jsx("span",{children:i(s.published_at)})]})]})})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx("div",{className:"bg-primary rounded-full p-2 backdrop-blur-sm",children:e.jsx(E,{className:"h-5 w-5 text-white"})})})]})}),o&&e.jsx(V,{article:s,onClose:()=>t(!1)})]})},C=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Z=s=>{var t,i;const o={news:{bg:"bg-primary",text:"text-primary-foreground"},short_news:{bg:"bg-primary/90",text:"text-primary-foreground"},blog:{bg:"bg-primary",text:"text-primary-foreground"},press_release:{bg:"bg-primary",text:"text-primary-foreground"},sponsored:{bg:"bg-primary/80",text:"text-primary-foreground"},price_prediction:{bg:"bg-primary",text:"text-primary-foreground"},guest_post:{bg:"bg-primary/90",text:"text-primary-foreground"},research_report:{bg:"bg-primary",text:"text-primary-foreground"},web3_bulletin:{bg:"bg-primary",text:"text-primary-foreground"},web_story:{bg:"bg-primary",text:"text-primary-foreground"}};return`${((t=o[s])==null?void 0:t.bg)||"bg-primary"} ${((i=o[s])==null?void 0:i.text)||"text-primary-foreground"}`},ge=({article:s,darkMode:o=!1})=>{var a;if(s.content_type==="web_story")return e.jsx(Y,{article:s});const[t,i]=x.useState({}),g=l=>{i(f=>({...f,[l]:!0}))},u=l=>l.status!=="published"&&l.status!=="featured"||!l.published_at?!1:new Date(l.published_at)<=new Date,c=o;return e.jsx(P,{href:`/articles/${s.slug}`,children:e.jsxs(z,{className:b("group relative cursor-pointer overflow-hidden rounded-lg p-0",s.deleted_at&&"opacity-60",c?"border-neutral-700 bg-neutral-800":"bg-white"),children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-lg p-2",children:[e.jsx("img",{src:s.banner_url||s.banner_image||"/default-banner.png",alt:s.title,className:"aspect-video h-full w-full rounded-lg object-cover",onError:()=>g(s.id),loading:"lazy"}),e.jsxs("div",{className:"absolute top-3 right-3 flex -space-x-1",children:[s.is_breaking_news&&e.jsxs("span",{className:"relative z-30 flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-red-500"})]}),s.is_trending&&e.jsxs("span",{className:"relative z-20 flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-yellow-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-yellow-500"})]}),s.is_time_sensitive&&e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-primary/75 opacity-75"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-primary"})]})]}),e.jsxs("div",{className:"absolute bottom-3 left-3 flex flex-wrap gap-2",children:[e.jsx(h,{variant:"secondary",className:"bg-primary/80 text-primary-foreground text-xs uppercase",children:(a=s.category)==null?void 0:a.name}),e.jsx(h,{variant:"secondary",className:`text-xs uppercase ${Z(s.content_type)}`,children:s.content_type.replace("_"," ")}),s.status==="featured"&&e.jsx(h,{variant:"secondary",className:"bg-primary/80 text-primary-foreground text-xs uppercase",children:"Featured"}),s.is_breaking_news&&e.jsx(h,{variant:"secondary",className:"bg-primary/80 text-primary-foreground text-xs uppercase",children:"Breaking"}),s.is_trending&&e.jsx(h,{variant:"secondary",className:"bg-primary/80 text-primary-foreground text-xs uppercase",children:"Trending"}),s.is_time_sensitive&&e.jsx(h,{variant:"secondary",className:"bg-primary/80 text-primary-foreground text-xs uppercase",children:"Time Sensitive"})]}),s.status==="draft"&&e.jsx("div",{className:"bg-background/50 absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"bg-primary text-primary-foreground rounded-full px-3 py-1 text-xs font-medium",children:"Draft"})})]}),e.jsxs(I,{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{className:b("line-clamp-1 text-xl font-semibold text-balance transition-colors",c?"text-white group-hover:text-gray-300":"group-hover:text-muted-foreground"),children:s.title}),e.jsx($,{className:b("line-clamp-1 text-sm",c?"text-gray-400":"text-muted-foreground"),children:s.excerpt})]}),e.jsxs("div",{className:b("grid grid-cols-3 gap-2 text-xs",c?"text-gray-400":"text-muted-foreground"),children:[s.author&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),e.jsx("span",{children:s.author.name})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),u(s)?e.jsx("span",{children:C(s.published_at)}):e.jsxs("span",{children:["Draft created ",C(s.created_at)]})]}),s.source&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),e.jsx("span",{children:s.source})]}),s.reading_time&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.reading_time," min read"]})]})]})]})]})})};export{ge as A};
