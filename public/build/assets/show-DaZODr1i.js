import{r as o,j as e,Q as p,t as i}from"./app-BOrcgD8O.js";import{H as h,F as j}from"./header-BO08jSYX.js";import{S as f}from"./share-dialog-QOtvRqzM.js";import{A as g,a as w,b as v}from"./user-menu-content-C-4ADIpr.js";import{B as N}from"./button-D3RzP9bc.js";import{C as b,c as y}from"./card-CMmOJm5f.js";import"./index-2KS7RT67.js";import"./app-D9P0rHLG.js";import"./index-CHypbeTY.js";import"./dialog-DSqWSnh9.js";import"./search-CoGM1u-i.js";import"./popover-Cc1Mk-fq.js";import"./index-C4UDW7Et.js";import"./bell-D-Jj0oCp.js";import"./calendar-BC2QmCUn.js";import"./chevron-down-wi0ZfJ00.js";import"./bookmark-NMNA3kW9.js";import"./clock-CRj48TPA.js";import"./input-D6yDtoLe.js";import"./share-2-8PtAxT2I.js";import"./copy-kZ3_Zb_L.js";function z({videoId:a,title:s,onError:l}){const[t,n]=o.useState(!1);o.useEffect(()=>{n(!1)},[a]);const c=()=>{console.error("YouTube player error:",{videoId:a}),n(!0),l==null||l()};return!a||t?e.jsxs("div",{className:"bg-muted flex h-full flex-col items-center justify-center gap-4 p-4",children:[e.jsx("p",{className:"text-muted-foreground",children:t?"Unable to load video":"No video ID provided"}),a&&e.jsxs("a",{href:`https://www.youtube.com/watch?v=${a}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700",children:["Watch on YouTube",e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:[e.jsx("path",{fillRule:"evenodd",d:"M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z"}),e.jsx("path",{fillRule:"evenodd",d:"M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z"})]})]})]}):e.jsx("div",{className:"relative aspect-video w-full",children:e.jsx("iframe",{className:"absolute inset-0 h-full w-full",src:`https://www.youtube.com/embed/${a}`,title:s,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onError:c})})}function K({auth:a,video:s,relatedVideos:l,meta:t}){const[n,c]=o.useState(s.upvotes_count),[M,C]=o.useState(!1),[d,x]=o.useState(!1),u=()=>{console.error("Failed to load YouTube video"),x(!0)};return o.useEffect(()=>{console.log("Component mounted with video data:",{url:s.youtube_url,id:s.youtube_id,error:d});const r=m=>{m.origin==="https://www.youtube.com"&&console.log("YouTube iframe message:",m.data)};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)},[s,d]),e.jsxs("div",{children:[e.jsxs(p,{title:t.title,children:[e.jsx("meta",{name:"description",content:t.description}),e.jsx("meta",{name:"keywords",content:t.keywords}),e.jsx("meta",{property:"og:title",content:t.og.title}),e.jsx("meta",{property:"og:description",content:t.og.description}),t.og.image&&e.jsx("meta",{property:"og:image",content:t.og.image}),e.jsx("meta",{property:"og:type",content:t.og.type}),e.jsx("meta",{property:"og:url",content:t.og.url}),e.jsx("meta",{name:"twitter:card",content:t.twitter.card}),e.jsx("meta",{name:"twitter:title",content:t.twitter.title}),e.jsx("meta",{name:"twitter:description",content:t.twitter.description}),t.twitter.image&&e.jsx("meta",{name:"twitter:image",content:t.twitter.image})]}),e.jsx(h,{}),e.jsxs("main",{className:"mx-auto max-w-7xl px-4 py-8 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{href:route("cryptocurrency-videos.index"),className:"text-muted-foreground hover:text-foreground",children:"Cryptocurrency Videos"}),e.jsx("span",{className:"text-muted-foreground",children:"/"}),e.jsx("span",{className:"font-medium",children:s.title})]}),e.jsx(f,{url:window.location.href,title:s.title,description:s.description||"Check out this cryptocurrency video!"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"mb-6 aspect-video overflow-hidden rounded-lg",children:e.jsx(z,{videoId:s.youtube_id,title:s.title,onError:u})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"mb-4 text-2xl font-bold md:text-3xl",children:s.title}),e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"text-muted-foreground h-5 w-5",children:[e.jsx("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),e.jsx("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z",clipRule:"evenodd"})]}),e.jsxs("span",{className:"text-muted-foreground",children:[s.view_count," views"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"text-muted-foreground h-5 w-5",children:[e.jsx("path",{d:"M12.75 12.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM7.5 15.75a.75.75 0 100-1.5.75.75 0 000 1.5zM8.25 17.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM9.75 15.75a.75.75 0 100-1.5.75.75 0 000 1.5zM10.5 17.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12 15.75a.75.75 0 100-1.5.75.75 0 000 1.5zM12.75 17.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM14.25 15.75a.75.75 0 100-1.5.75.75 0 000 1.5zM15 17.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM16.5 15.75a.75.75 0 100-1.5.75.75 0 000 1.5zM15 12.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM16.5 13.5a.75.75 0 100-1.5.75.75 0 000 1.5z"}),e.jsx("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 017.5 3v1.5h9V3A.75.75 0 0118 3v1.5h.75a3 3 0 013 3v11.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V7.5a3 3 0 013-3H6V3a.75.75 0 01.75-.75zm13.5 9a1.5 1.5 0 00-1.5-1.5H5.25a1.5 1.5 0 00-1.5 1.5v7.5a1.5 1.5 0 001.5 1.5h13.5a1.5 1.5 0 001.5-1.5v-7.5z",clipRule:"evenodd"})]}),e.jsx("span",{className:"text-muted-foreground",children:new Date(s.published_at).toLocaleDateString()})]})]})}),e.jsxs("div",{className:"bg-muted mb-6 flex items-center gap-4 rounded-lg p-4",children:[e.jsxs(g,{className:"h-12 w-12",children:[e.jsx(w,{src:s.user.avatar||void 0,alt:s.user.name}),e.jsx(v,{children:s.user.name.substring(0,2).toUpperCase()})]}),e.jsxs("div",{children:[e.jsx(i,{href:`/users/${s.user.username}`,className:"font-semibold hover:underline",children:s.user.name}),s.user.bio&&e.jsx("p",{className:"text-muted-foreground line-clamp-2 text-sm",children:s.user.bio})]})]}),s.description&&e.jsxs("div",{className:"bg-card mb-6 rounded-lg p-4",children:[e.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Description"}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{className:"whitespace-pre-line",children:s.description})})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-4 space-y-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Related Videos"}),e.jsx("div",{className:"space-y-4",children:l.length>0?l.map(r=>e.jsx(b,{className:"overflow-hidden",children:e.jsx(i,{href:route("cryptocurrency-videos.show",r.slug),children:e.jsxs("div",{className:"flex flex-col sm:flex-row lg:flex-col",children:[e.jsxs("div",{className:"relative aspect-video sm:w-1/3 lg:w-full",children:[e.jsx("img",{src:r.thumbnail_url||`https://img.youtube.com/vi/${r.youtube_id}/mqdefault.jpg`,alt:r.title,className:"h-full w-full object-cover"}),r.duration&&e.jsx("div",{className:"absolute right-2 bottom-2 rounded bg-black/70 px-1 py-0.5 text-xs text-white",children:r.duration})]}),e.jsxs(y,{className:"p-3 sm:w-2/3 lg:w-full",children:[e.jsx("h3",{className:"line-clamp-2 text-sm font-medium",children:r.title}),e.jsxs("div",{className:"text-muted-foreground mt-2 flex items-center text-xs",children:[e.jsxs("span",{children:[r.view_count," views"]}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{children:new Date(r.published_at).toLocaleDateString()})]})]})]})})},r.id)):e.jsx("p",{className:"text-muted-foreground p-4 text-center",children:"No related videos found"})}),e.jsx("div",{className:"mt-8",children:e.jsx(i,{href:route("cryptocurrency-videos.index"),children:e.jsxs(N,{variant:"outline",className:"w-full",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"mr-2 h-4 w-4",children:e.jsx("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z",clipRule:"evenodd"})}),"Back to All Videos"]})})})]})})]})]}),e.jsx(j,{})]})}export{K as default};
